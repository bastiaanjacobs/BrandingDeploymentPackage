<html xmlns:mso="urn:schemas-microsoft-com:office:office" xmlns:msdt="uuid:C2F41010-65B3-11d1-A29F-00AA00C14882"> 
<head>
<title>GerelateerdeNieuwsBerichten</title>

<!--[if gte mso 9]><xml>
<mso:CustomDocumentProperties>
<mso:TemplateHidden msdt:dt="string">0</mso:TemplateHidden>
<mso:ManagedPropertyMapping msdt:dt="string">&#39;RefinableDate02&#39;:&#39;RefinableDate02&#39;,&#39;RefinableDate00&#39;:&#39;RefinableDate00&#39;,&#39;PublishingStartDateOWSDATE&#39;:&#39;PublishingStartDateOWSDATE&#39;,&#39;PublishingImage&#39;:&#39;PublishingImage&#39;,&#39;DocId&#39;:&#39;DocId&#39;,&#39;ContentType&#39;:&#39;ContentType&#39;,&#39;LikesCount&#39;:&#39;LikesCount&#39;,&#39;ViewsRecent&#39;:&#39;ViewsRecent&#39;,&#39;ViewsLifeTime&#39;:&#39;ViewsLifeTime&#39;,&#39;PublicatiedatumOWSDATE&#39;:&#39;PublicatiedatumOWSDATE&#39;,&#39;Picture URL&#39;{Afbeeldings-URL:}:&#39;PublishingImage;PictureURL;PictureThumbnailURL&#39;,&#39;Link URL&#39;{URL van koppeling}:&#39;Path&#39;,&#39;Line 1&#39;{Regel 1}:&#39;Title&#39;,&#39;Line 2&#39;{Regel 2}:&#39;Description&#39;,&#39;Line 3&#39;{Regel 3}:&#39;&#39;,&#39;SecondaryFileExtension&#39;,&#39;ContentTypeId&#39;</mso:ManagedPropertyMapping><mso:MasterPageDescription msdt:dt="string">Met dit itemweergavesjabloon wordt het gerelateerde nieuws getoond op basis van de nieuwscategorie van het nieuwsbericht.</mso:MasterPageDescription><mso:ContentTypeId msdt:dt="string">0x0101002039C03B61C64EC4A04F5361F385106603</mso:ContentTypeId><mso:TargetControlType msdt:dt="string">;#Content Web Parts;#</mso:TargetControlType><mso:HtmlDesignAssociated msdt:dt="string">1</mso:HtmlDesignAssociated><mso:CrawlerXSLFile msdt:dt="string"></mso:CrawlerXSLFile><mso:HtmlDesignPreviewUrl msdt:dt="string"></mso:HtmlDesignPreviewUrl><mso:HtmlDesignStatusAndPreview msdt:dt="string">https://liveadminclusius.sharepoint.com/_catalogs/masterpage/Display Templates/Content Web Parts/_clusius/Item_GerelateerdeNieuwsBerichten.html, De conversie is voltooid.</mso:HtmlDesignStatusAndPreview><mso:HtmlDesignConversionSucceeded msdt:dt="string">True</mso:HtmlDesignConversionSucceeded><mso:DefaultCssFile msdt:dt="string"></mso:DefaultCssFile>
<mso:CompatibleManagedProperties msdt:dt="string"></mso:CompatibleManagedProperties>
<mso:DisplayTemplateJSTemplateType msdt:dt="string"></mso:DisplayTemplateJSTemplateType>
<mso:DisplayTemplateJSTargetListTemplate msdt:dt="string"></mso:DisplayTemplateJSTargetListTemplate>
<mso:PublishingPreviewImage msdt:dt="string"></mso:PublishingPreviewImage>
<mso:CompatibleSearchDataTypes msdt:dt="string"></mso:CompatibleSearchDataTypes>
<mso:DisplayTemplateLevel msdt:dt="string"></mso:DisplayTemplateLevel>
<mso:DisplayTemplateJSTargetControlType msdt:dt="string"></mso:DisplayTemplateJSTargetControlType>
<mso:DisplayTemplateJSIconUrl msdt:dt="string"></mso:DisplayTemplateJSIconUrl>
<mso:DisplayTemplateJSTargetScope msdt:dt="string"></mso:DisplayTemplateJSTargetScope>
<mso:PublishingAssociatedVariations msdt:dt="string"></mso:PublishingAssociatedVariations>
<mso:UIVersion msdt:dt="string"></mso:UIVersion>
<mso:PublishingAssociatedContentType msdt:dt="string"></mso:PublishingAssociatedContentType>
</mso:CustomDocumentProperties></xml><![endif]-->
</head>

<body>

    <!--
            Warning: Do not try to add HTML to this section. Only the contents of the first <div>
            inside the <body> tag will be used while executing Display Template code. Any HTML that
            you add to this section will NOT become part of your Display Template.
    -->
    <script>
        $includeLanguageScript(this.url, "~sitecollection/_catalogs/masterpage/Display Templates/Language Files/{Locale}/CustomStrings.js");
    </script>

    <!--
        Use the div below to author your Display Template. Here are some things to keep in mind:
        * Surround any JavaScript logic as shown below using a "pound underscore" (#_ ... _#) token
        inside a comment.

        * Use the values assigned to your variables using an "underscore pound equals"
        (_#= ... =#_) token.
    -->

    <div id="Item_PictureOnTop">
<!--#_
var encodedId = $htmlEncode(ctx.ClientControl.get_nextUniqueId() + "_pictureOnTop_");

var linkURL = $getItemValue(ctx, "Link URL");
linkURL.overrideValueRenderer($urlHtmlEncode);

var line1 = $getItemValue(ctx, "Line 1");
var setLineHeightRenderer = function(valueInfoObj)
{
    if(!$isNull(valueInfoObj) && !valueInfoObj.isEmpty)
    {
        if(!$isNull(valueInfoObj.defaultValueRenderer))
        {
            return valueInfoObj.defaultValueRenderer(valueInfoObj);
        }
        else
        {
            return valueInfoObj.toString();
        }
    }
    else
    {
        return "&nbsp;";
    }
}
var line2 = $getItemValue(ctx, "Line 2");
line2.overrideValueRenderer(setLineHeightRenderer);
var line3 = $getItemValue(ctx, "Line 3");
line3.overrideValueRenderer(setLineHeightRenderer);
var pictureURL = $getItemValue(ctx, "Picture URL");
var pictureId = encodedId + "picture";
var pictureMarkup = Srch.ContentBySearch.getPictureMarkup(pictureURL, 304, 100, ctx.CurrentItem, "cbs-pictureOnTopImg", line1, pictureId);
var containerId = encodedId + "container";
var pictureLinkId = encodedId + "pictureLink";
var pictureContainerId = encodedId + "pictureContainer";
var dataContainerId = encodedId + "dataContainer";
var line1LinkId = encodedId + "line1Link";
var line1Id = encodedId + "line1";
var line2Id = encodedId + "line2";
var line3Id = encodedId + "line3";


var contenttype = (ctx.CurrentItem.ContentType);
var spcontenttype = (ctx.CurrentItem.SPContentType);
var titel = (ctx.CurrentItem.Title);
var encodedPath = $urlHtmlEncode(ctx.CurrentItem.Path);
var docId = (ctx.CurrentItem.DocId);

var article_image = ctx.CurrentItem.PublishingImage;
	if (article_image != "" && article_image != undefined) {				
		if (article_image.indexOf("RenditionID") > -1) {
			article_image = article_image.replace(/\?.*/g, '?RenditionID=5"/>');
		}
	}
			
// remove the styling of the Titel field
var div2 = document.createElement("div2");
div2.innerHTML= titel;
var TitelLong = div2.textContent|| div2.innerText|| "";				
	if (TitelLong.toString().length > 55) {
		var trimmedTitle = TitelLong.replace(/.{55}\S*\s+/g, "$&@").split(/\s+@/);
		var trimmedTitleElip = (trimmedTitle[0] + '...');
		TitelContent = trimmedTitleElip;
		console.log(trimmedTitleElip);
	}
	else {
		TitelContent = TitelLong;
	}

// set format for the publishing start date
var publicatiedatum = $getItemValue(ctx, "RefinableDate00");
var parsedDate = new Date(publicatiedatum.inputValue);
parsedDate = parsedDate.localeFormat("dd MMMM yyyy MM:HH");

varContainer = "newsitem-gerelateerd-container";  		
         
                                     
_#-->
<section class="_#= varContainer =#_">
	<a class="newsitem-gerelateerd-image" href="_#= ctx.CurrentItem.Path =#_" alt="news item image" title="Afbeelding" data-docid="_#= docId =#_">_#= article_image =#_ </a>
    <div class="newsitem-gerelateerd-title"><a href="_#= ctx.CurrentItem.Path =#_" title="Title">_#= $htmlEncode(TitelContent) =#_ </a></div>
    <div class="newsitem-gerelateerd-publicatiedatum"><a href="_#= ctx.CurrentItem.Path =#_">_#= parsedDate =#_</a></div>
</section>                                           
        
    </div>
</body>
</html>
